# Marketplace REST API

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```sh
   git clone https://github.com/yourusername/marketplace-for-vk.git
   cd marketplace-for-vk
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
   ```sh
   cp .env.example .env
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Docker Compose:
   ```sh
   docker-compose up --build
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API —á–µ—Ä–µ–∑ curl –∏–ª–∏ Postman:
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
   - –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
   - –ü–æ–ª—É—á–∏—Ç–µ –ª–µ–Ω—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π

(–ü—Ä–∏–º–µ—Ä—ã curl-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî –Ω–∏–∂–µ –ø–æ —Ç–µ–∫—Å—Ç—É README)

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go (Gin, bcrypt, JWT)
- PostgreSQL
- Docker, Docker Compose

---

## üìö –û–ø–∏—Å–∞–Ω–∏–µ API

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

#### POST /api/auth/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- Request:
   {
    "login": "user1",
    "password": "123456"
  }
  - Response:
   {
    "id": 1,
    "login": "user1"
  }
  
#### POST /api/auth/login
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- Request:
   {
    "login": "user1",
    "password": "123456"
  }
  - Response:
   {
    "token": "JWT_TOKEN"
  }
  
- –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
   Authorization: Bearer JWT_TOKEN
  
---

### –†–∞–±–æ—Ç–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏

#### POST /api/ads
–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)

- Request:
   {
    "title": "iPhone 15 Pro",
    "text": "–ù–æ–≤—ã–π –≤ –∫–æ—Ä–æ–±–∫–µ, –≥–∞—Ä–∞–Ω—Ç–∏—è.",
    "image_url": "https://example.com/iphone.jpg",
    "price": 999.99
  }
  - Response:
   {
    "id": 1,
    "title": "iPhone 15 Pro",
    "text": "–ù–æ–≤—ã–π –≤ –∫–æ—Ä–æ–±–∫–µ, –≥–∞—Ä–∞–Ω—Ç–∏—è.",
    "image_url": "https://example.com/iphone.jpg",
    "price": 999.99,
    "author_id": 1,
    "created_at": "2024-07-21T18:00:00Z"
  }
  
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫: 5‚Äì100 —Å–∏–º–≤–æ–ª–æ–≤
  - –¢–µ–∫—Å—Ç: 10‚Äì1000 —Å–∏–º–≤–æ–ª–æ–≤
  - –¶–µ–Ω–∞: > 0
  - –ê–¥—Ä–µ—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –≤–∞–ª–∏–¥–Ω—ã–π URL

---

#### GET /api/ads
–ü–æ–ª—É—á–∏—Ç—å –ª–µ–Ω—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:
  - page (int, default: 1) ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  - limit (int, default: 10) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  - sort (string, default: created_at_desc) ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: created_at_desc, price_asc, price_desc
  - min_price (float) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ
  - max_price (float) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ

- Response:
   {
    "data": [
      {
        "id": 1,
        "title": "iPhone 15 Pro",
        "text": "–ù–æ–≤—ã–π –≤ –∫–æ—Ä–æ–±–∫–µ, –≥–∞—Ä–∞–Ω—Ç–∏—è.",
        "image_url": "https://example.com/iphone.jpg",
        "price": 999.99,
        "author": "user1",
        "is_mine": true,
        "created_at": "2024-07-21T18:00:00Z"
      }
      // ...
    ],
    "meta": {
      "page": 1,
      "limit": 10,
      "total": 1
    }
  }
  
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
  - –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª–µ is_mine –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üìù –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –õ–æ–≥–∏–Ω: 3‚Äì50 —Å–∏–º–≤–æ–ª–æ–≤, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- –ü–∞—Ä–æ–ª—å: 3‚Äì100 —Å–∏–º–≤–æ–ª–æ–≤
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: 5‚Äì100 —Å–∏–º–≤–æ–ª–æ–≤
- –¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è: 10‚Äì1000 —Å–∏–º–≤–æ–ª–æ–≤
- –¶–µ–Ω–∞: > 0
- –ê–¥—Ä–µ—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –≤–∞–ª–∏–¥–Ω—ã–π URL

---

## üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏–∏ SQL –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ migrations/.  
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ bcrypt-—Ö–µ—à–∞.
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT.
- –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–∞.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS (–ø–æ –∂–µ–ª–∞–Ω–∏—é).

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"login":"user1", "password":"123456"}'

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"login":"user1", "password":"123456"}'

–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:
curl -X POST http://localhost:8080/api/ads \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{"title":"iPhone 15 Pro","text":"–ù–æ–≤—ã–π –≤ –∫–æ—Ä–æ–±–∫–µ","image_url":"https://example.com/iphone.jpg","price":999.99}'

–ü–æ–ª—É—á–∏—Ç—å –ª–µ–Ω—Ç—É:
curl http://localhost:8080/api/ads

---

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ê–≤—Ç–æ—Ä: –î–º–∏—Ç—Ä–∏–π –¢–æ–º—á—É–∫ (tg: @tomchukd)

---
